!function($){$.fn.rater=function(i){var t,a=$(this),n=$.extend({count:5,color_fill:"#f0ad4e",color_outline:"#ccc",fa_class_fill:"fa-star",fa_class_outline:"fa-star-o",input_name:a.prop("id")+"_input",defaultValue:0},i),s=function(){for(t=0;t<n.count;t++)a.append("<span class='fa "+n.fa_class_outline+"' data-rating='"+parseInt(t+1)+"' aria-label='"+parseInt(t+1)+" "+n.fa_class_fill.replace("fa-","")+"'></span>");a.append("<input type='hidden' id='"+n.input_name+"' name='"+n.input_name+"' class='rating-value' value='"+n.defaultValue+"'/>"),l(1)},l=function(i){return a.children(".fa").each(function(){return 1!=i&&0!=i||$(this).blur(),parseInt($(this).siblings("input.rating-value").val())==parseInt($(this).data("rating"))?($(this).attr("tabindex",0),1!==i&&$(this).focus(),$(this).css("color",n.color_fill),$(this).removeClass(n.fa_class_outline).addClass(n.fa_class_fill)):parseInt($(this).siblings("input.rating-value").val())>parseInt($(this).data("rating"))?(""==$(this).siblings("input.rating-value").val()&&1==parseInt($(this).data("rating"))?$(this).attr("tabindex",0):$(this).attr("tabindex",-1),$(this).css("color",n.color_fill),$(this).removeClass(n.fa_class_outline).addClass(n.fa_class_fill)):(0===$(this).siblings("input.rating-value").val()&&1==parseInt($(this).data("rating"))?0===$(this).parent().find(":focus").length&&$(this).attr("tabindex",0):$(this).attr("tabindex",-1),$(this).css("color",n.color_outline),$(this).removeClass(n.fa_class_fill).addClass(n.fa_class_outline))})};a.on("click keydown",".fa",function(i){if(0===i.which||1===i.which||32===i.which)return i.preventDefault(),$(this).siblings("input.rating-value").val()==$(this).data("rating")?($(this).siblings("input.rating-value").val(0),l(i.which)):($(this).siblings("input.rating-value").val($(this).data("rating")),l(i.which));if(37===i.which||40===i.which){if(i.preventDefault(),$(this).siblings("input.rating-value").val()>0)return $(this).siblings("input.rating-value").val(parseInt($(this).siblings("input.rating-value").val())-1),l(i.which)}else if((39===i.which||38===i.which)&&(i.preventDefault(),$(this).siblings("input.rating-value").val()<n.count))return $(this).siblings("input.rating-value").val(parseInt($(this).siblings("input.rating-value").val())+1),l(i.which)}),a.on("mousedown",".fa",function(){event.preventDefault(),$(this).blur()}),a.on("focusout",".fa",function(){0==$(this).siblings("input.rating-value").val()&&$(this).parent().children(":first").attr("tabindex",0)}),a.on("touchmove",".fa",function(i){var t=i.originalEvent.touches[0],a=$(document.elementFromPoint(t.clientX,t.clientY));if(parseInt($(a).siblings("input.rating-value").val())!=parseInt($(a).data("rating"))){var n=jQuery.Event("click",{which:1});$(a).trigger(n)}}),s()}}(jQuery);